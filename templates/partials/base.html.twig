{# Set Metadata#}
{% if header.title == "Blog" %}
    {% set title = "F-Rilling.com" |e('html') %}
{% else %}
    {% set title = header.title ~ " | " ~ site.title |e('html') %}
{% endif %}
{% if page.header.taxonomy %}
    {% set description = page.summary | striptags | truncate(300) %}
    {% set keywords = page.header.taxonomy.tag | join(", ") %}
{% else %}
    {% set description = header.meta.description | truncate(300) %}
    {% set keywords = header.meta.tags %}
{% endif %}
{# Schema Data#}
{% if page.template == "projects" or page.template == "portfolio" %}
    {% set schemaType = "CollectionPage" %}
{% elseif page.template == "about" %}
    {% set schemaType = "AboutPage"%}
{% else %}
    {% set schemaType = "WebPage" %}
{% endif %}
{# OpenGraph Data#}
{% if page.template == "item" %}
    {% set ogType = "article" %}
    {% set ogUrl = "article:http://ogp.me/ns/article#"%}
{% elseif page.template == "about" %}
    {% set ogType = "profile" %}
    {% set ogUrl = "profile:http://ogp.me/ns/profile#"%}
{% else %}
    {% set ogType = "website" %}
    {% set ogUrl = ""%}
{% endif %}

<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/{{schemaType}}">
    <head prefix="og:http://ogp.me/ns# fb:http://ogp.me/ns/fb#{{ogUrl}}">
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="index,follow"/>
        <title>{{title|e}}</title>
        <meta name="description" content="{{description|e|slice(0,160)}}"/>
        <meta name="keywords" content="{{keywords}}"/>
        <meta name="author" content="Felix Rilling"/>

        <!--

         ______     _  _         _____   _  _  _  _
        |  ____|   | |(_)       |  __ \ (_)| || |(_)
        | |__  ___ | | _ __  __ | |__) | _ | || | _  _ __    __ _
        |  __|/ _ \| || |\ \/ / |  _  / | || || || || '_ \  / _` |
        | |  |  __/| || | >  <  | | \ \ | || || || || | | || (_| |
        |_|   \___||_||_|/_/\_\ |_|  \_\|_||_||_||_||_| |_| \__, |
                                                             __/ |
                                                            |___/

        Checking out the source-code? you can view the full theme source on my github:
        https://github.com/FelixRilling/f-rilling.com

        -->

        <meta property="og:title" content="{{title|e}}"/>
        <meta property="og:url" content="{{page.url(true, true)}}"/>
        <meta property="og:description" content="{{description|e|slice(0,300)}}"/>
        <meta property="og:type" content="{{ogType}}"/>
        <meta property="og:image:width" content="279">
        <meta property="og:image:height" content="279">
        <meta property="og:image" content="{{url('theme://img/icons/og-image.jpg', true)}}"/>
        <meta property="og:site_name" content="F-Rilling"/>
        {% if ogType == "article"%}
        <meta property="og:article:tag" content="{{page.taxonomy.tag|join(', ')|e}}"/>
        <meta property="og:article:author" content="Felix Rilling"/>
        <meta property="og:article:published_time" content="{{page.date|date("Y-m-d")}}"/>
        {% elseif ogType == "profile" %}
        <meta property="og:profile:first_name" content="Felix"/>
        <meta property="og:profile:last_name" content="Rilling"/>
        {% endif %}

        <meta name="twitter:card" content="summary">
        <meta name="twitter:url" content="{{page.url(true, true)}}">
        <meta name="twitter:title" content="{{title|e}}">
        <meta name="twitter:description" content="{{description|e|slice(0,200)}}">
        <meta name="twitter:image" content="{{url('theme://img/icons/apple-touch-icon.png', true)}}"/>
        <meta name="twitter:creator" content="@FelixRilling">

        <link rel="apple-touch-icon" sizes="180x180" href="{{url('theme://img/icons/apple-touch-icon.png', true)}}">
        <link rel="icon" type="image/png" sizes="32x32" href="{{url('theme://img/icons/favicon-32x32.png', true)}}">
        <link rel="icon" type="image/png" sizes="16x16" href="{{url('theme://img/icons/favicon-16x16.png', true)}}">
        <link rel="manifest" href="{{url('theme://img/icons/manifest.json', true)}}">
        <link rel="mask-icon" href="{{url('theme://img/icons/safari-pinned-tab.', true)}}" color="#83d356">
        <link rel="shortcut icon" href="{{url('theme://img/icons/favicon.ico', true)}}">
        <meta name="msapplication-config" content="{{url('theme://img/icons/browserconfig.xml', true)}}">
        <meta name="theme-color" content="#83d356">

        <link rel="canonical" href="{{page.url(true, true)}}"/>

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arvo|Lato:400,700|Source+Code+Pro">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
        {% block css %}
            {% do
                assets.addCss('theme://css/app.css', 101) %}
        {% endblock %}
        {{ assets.css() }}

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-56958424-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body id="top">
        <header>
            {% block navigation %}
                {% include "partials/navigation.html.twig" %}
            {% endblock %}
            {% block presenter %}{% endblock %}
        </header>

        <main>
            {% block main %}{% endblock %}
        </main>

        <footer class="footer">
            {% include "partials/footer.html.twig" %}
        </footer>

        {% block cookies %}
                {% include "modular/cookienotice.html.twig" %}
        {% endblock %}

        {% block js %}
            {% if page.template == "item" %}
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
            {% endif %}
            {% do
                assets.addJs("theme://js/app.js", 100) %}
        {% endblock %}
        {{ assets.js() }}
        {# put pagetype for JS #}
        <script>frilling.init("{{page.template}}");</script>
    </body>
</html>
